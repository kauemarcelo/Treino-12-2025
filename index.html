<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RelatÃ³rio de Treino</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#0f172a;color:#fff}
header{background:#14532d;padding:14px;text-align:center;font-weight:bold}
.container{padding:15px}
.accordion{background:#020617;border-radius:8px;margin-bottom:10px}
.accordion-header{padding:14px;cursor:pointer;background:#022c22;font-weight:bold}
.accordion-content{display:none;padding:12px;background:#022c22}
.timer{text-align:center;font-size:28px;margin:10px 0}
.buttons{display:flex;gap:10px}
button{flex:1;padding:12px;border:none;border-radius:6px;background:#16a34a;color:#fff;cursor:pointer}
button.secondary{background:#334155}
.card{background:#022c22;padding:12px;border-radius:8px;margin-bottom:10px;white-space:pre-wrap}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);align-items:center;justify-content:center}
.modal-content{background:#022c22;padding:15px;width:95%;max-width:420px;border-radius:10px}
.exercise-input{display:flex;gap:6px;margin-bottom:6px}
.exercise-input input{width:60px;padding:6px;border-radius:4px;border:none}
</style>
</head>

<body>

<header>ğŸ“‹ RELATÃ“RIO DE TREINO</header>

<div class="container">

<div id="treinos"></div>

<div class="timer" id="timer">00:00</div>

<div class="buttons">
  <button onclick="iniciar()">â–¶ï¸ Iniciar</button>
  <button class="secondary" onclick="finalizar()">â¹ï¸ Finalizar</button>
</div>

<h3>ğŸ“š HistÃ³rico</h3>
<div id="historico"></div>

</div>

<!-- MODAL PREENCHIMENTO -->
<div class="modal" id="modalForm">
 <div class="modal-content">
  <h3>ğŸ‹ï¸ Preencher exercÃ­cios</h3>
  <div id="formExercicios"></div>
  <button onclick="confirmarTreino()">âœ… Confirmar</button>
  <button class="secondary" onclick="fecharForm()">â¬…ï¸ Voltar</button>
 </div>
</div>

<!-- MODAL EXPORT -->
<div class="modal" id="modalExport">
 <div class="modal-content">
  <h3>ğŸ“¤ Exportar relatÃ³rio</h3>
  <pre id="preview"></pre>
  <button onclick="fecharExport()" class="secondary">â¬…ï¸ Voltar</button>
  <button onclick="whats(0)">ğŸ“² Kaue</button>
  <button onclick="whats(1)">ğŸ“² Lucas</button>
  <button onclick="email(0)">âœ‰ï¸ Kaue</button>
  <button onclick="email(1)">âœ‰ï¸ Lucas</button>
 </div>
</div>

<script>
// CONTATOS
const whatsList=[{num:'11995934612'},{num:'11982668958'}];
const emailList=[{mail:'kauerossi1999@gmail.com'},{mail:'lcasgalindo@gmail.com'}];

// TREINOS
const treinos={
 "Treino A":[
  "Supino Vertical","Peck Deck (isometria 3 seg)","Supino Inclinado Halteres",
  "Supino Inclinado MÃ¡quina","Desenvolvimento Frontal + Lateral (MÃ¡quina)",
  "TrÃ­ceps Pully + TrÃ­ceps Inverso","TrÃ­ceps Banco (MÃ¡quina)"
 ],
 "Treino B":[
  "Adutora + Abdutora","Leg 180","Agachamento Rack",
  "Cadeira Extensora","Flexora em PÃ©","Flexora Sentada"
 ],
 "Treino C":[
  "Postura","Remada Cavalinho","Remada Articulada",
  "Pully Articulado","Puxada Baixa + Desenvolvimento Voo",
  "Rosca Martelo + Rosca Dupla","Rosca Direta (W)"
 ]
};

let treinoAtual=null, tempo=0, intervalo=null, dadosExercicios=[];

// RENDER TREINOS
const treinosDiv=document.getElementById('treinos');
Object.keys(treinos).forEach(nome=>{
 const acc=document.createElement('div');
 acc.className='accordion';
 acc.innerHTML=`<div class="accordion-header">${nome}</div>
 <div class="accordion-content">${treinos[nome].map(e=>`â€¢ ${e}`).join('<br>')}</div>`;
 acc.querySelector('.accordion-header').onclick=()=>{
  document.querySelectorAll('.accordion-content').forEach(c=>c.style.display='none');
  acc.querySelector('.accordion-content').style.display='block';
  treinoAtual=nome;
 };
 treinosDiv.appendChild(acc);
});

// TIMER
function iniciar(){
 if(intervalo||!treinoAtual) return alert('Selecione um treino');
 intervalo=setInterval(()=>{
  tempo++;
  timer.innerText=String(Math.floor(tempo/60)).padStart(2,'0')+':' +
                  String(tempo%60).padStart(2,'0');
 },1000);
}

// FINALIZAR â†’ ABRE FORMULÃRIO
function finalizar(){
 if(!intervalo) return;
 clearInterval(intervalo); intervalo=null;
 abrirFormulario();
}

// FORMULÃRIO
function abrirFormulario(){
 dadosExercicios=[];
 formExercicios.innerHTML='';
 treinos[treinoAtual].forEach((e,i)=>{
  formExercicios.innerHTML+=`
   <div class="exercise-input">
    <span>${e}</span>
    <input placeholder="kg" id="kg${i}">
    <input placeholder="reps" id="rep${i}">
   </div>`;
 });
 modalForm.style.display='flex';
}

function confirmarTreino(){
 const data=new Date().toLocaleString();
 let txt=`ğŸ’ª RELATÃ“RIO DE TREINO\n\nğŸ‹ï¸ ${treinoAtual}\nğŸ“… ${data}\nâ±ï¸ ${timer.innerText}\n\nâœ… ConcluÃ­do!\n\nğŸ‹ï¸ ExercÃ­cios:\n`;
 treinos[treinoAtual].forEach((e,i)=>{
  const kg=document.getElementById(`kg${i}`).value||0;
  const rep=document.getElementById(`rep${i}`).value||0;
  txt+=`â€¢ ${e} â€“ ${kg}kg | ${rep} reps\n`;
 });
 salvar(txt);
 preview.innerText=txt;
 modalForm.style.display='none';
 modalExport.style.display='flex';
 tempo=0; timer.innerText='00:00';
}

// HISTÃ“RICO
function salvar(t){
 const h=JSON.parse(localStorage.getItem('hist')||'[]');
 h.unshift(t);
 localStorage.setItem('hist',JSON.stringify(h));
 renderHist();
}
function renderHist(){
 historico.innerHTML='';
 JSON.parse(localStorage.getItem('hist')||'[]')
 .forEach(t=>{
  const c=document.createElement('div');
  c.className='card';
  c.textContent=t;
  historico.appendChild(c);
 });
}
renderHist();

// EXPORT
function whats(i){window.open(`https://wa.me/55${whatsList[i].num}?text=${encodeURIComponent(preview.innerText)}`)}
function email(i){location.href=`mailto:${emailList[i].mail}?subject=RelatÃ³rio de Treino&body=${encodeURIComponent(preview.innerText)}`}
function fecharForm(){modalForm.style.display='none'}
function fecharExport(){modalExport.style.display='none'}
</script>

</body>
</html>
