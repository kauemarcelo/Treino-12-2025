<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meu Treino</title>

<meta name="theme-color" content="#0f172a">
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
:root{
  --bg:#0f172a;--card:#111827;--border:#1f2937;
  --text:#e5e7eb;--muted:#9ca3af;
  --primary:#2563eb;--success:#16a34a;
  --send:#475569;--danger:#7f1d1d;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:Arial,Helvetica,sans-serif;
  background:var(--bg);color:var(--text);padding:16px
}
h1{text-align:center;margin-bottom:20px}
h2{margin:10px 0}

.treino{
  background:var(--card);border:1px solid var(--border);
  border-radius:14px;margin-bottom:14px
}
.treino-header{
  padding:14px;cursor:pointer;
  display:flex;justify-content:space-between;align-items:center
}
.treino-header span{font-size:22px;color:var(--muted)}
.treino-body{display:none;padding:14px;border-top:1px solid var(--border)}

.controles{
  display:flex;gap:10px;flex-wrap:wrap;justify-content:center
}
.controles button{
  flex:1;min-width:110px;
  padding:12px;border:none;border-radius:12px;
  font-size:14px;color:#fff;cursor:pointer
}
.btn-iniciar{background:var(--primary)}
.btn-finalizar{background:var(--success)}
.btn-enviar{background:var(--send)}
.tempo{width:100%;text-align:center;margin-top:10px;color:var(--muted)}

.exercicio{
  border:1px solid var(--border);
  padding:10px;border-radius:10px;margin-top:10px
}

.modal{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.85);
  justify-content:center;align-items:center;z-index:50
}
.modal-content{
  background:var(--card);width:100%;max-width:520px;
  max-height:90vh;padding:16px;border-radius:16px;overflow:auto
}
.modal-content input{
  width:100%;padding:10px;margin:6px 0 12px;
  border-radius:10px;border:1px solid var(--border);
  background:#020617;color:var(--text)
}
.modal-actions{
  display:flex;gap:10px;flex-wrap:wrap;margin-top:16px
}
.modal-actions button{
  flex:1;padding:12px;border:none;border-radius:12px;
  font-size:15px;color:#fff;cursor:pointer
}

#historico div{
  background:#111827;
  border:1px solid #1f2937;
  border-radius:12px;
  padding:12px;
  margin-bottom:10px
}
</style>
</head>

<body>

<h1>ğŸ‹ï¸ Meu Treino</h1>

<div id="treinos"></div>

<h2>ğŸ“‹ HistÃ³rico de Treinos</h2>
<button onclick="limparHistorico()" style="background:#7f1d1d;color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;margin-bottom:12px">
ğŸ—‘ï¸ Limpar histÃ³rico
</button>
<div id="historico"></div>

<div class="modal" id="modal">
  <div class="modal-content">
    <h3>ğŸ“Š Registro do Treino</h3>
    <div id="campos"></div>

    <hr>

    <label>ğŸ“± WhatsApp</label>
    <input id="destinoWhats" placeholder="11999999999">

    <label>âœ‰ï¸ E-mail</label>
    <input id="destinoEmail" placeholder="email@email.com">

    <div class="modal-actions">
      <button onclick="fecharModal()" style="background:#64748b">â¬…ï¸ Voltar</button>
      <button onclick="enviarWhats()" style="background:#22c55e">ğŸ“² Whats</button>
      <button onclick="enviarEmail()" style="background:#f59e0b">âœ‰ï¸ Email</button>
    </div>
  </div>
</div>

<script>
const treinos = {
A:[
"Supino Vertical","Peck Deck (isometria 3 seg)","Supino Inclinado Halteres",
"Supino Inclinado MÃ¡quina","Desenv. Frontal + Lateral (MÃ¡quina)",
"TrÃ­ceps Pully + TrÃ­ceps Inverso","TrÃ­ceps Banco (MÃ¡quina)"
],
B:[
"Adutora e Abdutora (3x20)","Leg 180","Agachamento Rack",
"Cadeira Extensora","Flexora em PÃ©","Flexora Sentada"
],
C:[
"Postura","Remada Cavalinho","Remada Articulada","Pully Articulado",
"Puxada Baixa (Anilha) + Voo (Peck Deck)",
"Rosca Martelo (Corda) + Rosca Dupla","Rosca Direta (W)"
]
};

const timers={},historicoKey='historicoTreinos';
let treinoAtual='',salvarAoAbrir=false;

const treinosDiv=document.getElementById('treinos');
Object.keys(treinos).forEach(t=>{
treinosDiv.innerHTML+=`
<div class="treino">
  <div class="treino-header" onclick="toggleTreino('${t}')">
    <h2>Treino ${t}</h2><span id="icon_${t}">+</span>
  </div>
  <div class="treino-body" id="body_${t}">
    <div class="controles">
      <button class="btn-iniciar" onclick="iniciar('${t}')">â–¶ï¸ Iniciar</button>
      <button class="btn-finalizar" onclick="finalizar('${t}')">âœ… Finalizar</button>
      <button class="btn-enviar" onclick="abrirFormulario('${t}',false)">ğŸ“¤ Enviar</button>
      <div class="tempo" id="tempo_${t}">â±ï¸ 00:00</div>
    </div>
    ${treinos[t].map(e=>`<div class="exercicio">${e}</div>`).join('')}
  </div>
</div>`;
});

function toggleTreino(id){
['A','B','C'].forEach(t=>{
document.getElementById('body_'+t).style.display='none';
document.getElementById('icon_'+t).innerText='+';
});
document.getElementById('body_'+id).style.display='block';
document.getElementById('icon_'+id).innerText='âˆ’';
}

function iniciar(id){
timers[id]={start:Date.now()};
setInterval(()=>atualizar(id),1000);
}

function atualizar(id){
const total=Math.floor((Date.now()-timers[id].start)/1000);
const h=Math.floor(total/3600);
const m=Math.floor((total%3600)/60);
const s=total%60;
document.getElementById('tempo_'+id).innerText=
h>0?`â±ï¸ ${h}h ${String(m).padStart(2,'0')}min`
:`â±ï¸ ${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

function finalizar(id){abrirFormulario(id,true);}

function abrirFormulario(id,salvar){
treinoAtual=id;salvarAoAbrir=salvar;
const campos=document.getElementById('campos');campos.innerHTML='';
document.querySelectorAll('#body_'+id+' .exercicio').forEach(ex=>{
campos.innerHTML+=`
<strong>${ex.innerText}</strong>
<input placeholder="Peso (kg)">
<input placeholder="RepetiÃ§Ãµes">
`;
});
document.getElementById('modal').style.display='flex';
}

function fecharModal(){document.getElementById('modal').style.display='none';}

function gerarRegistro(){
const ex=[],inputs=document.querySelectorAll('#campos input');
document.querySelectorAll('#campos strong').forEach((e,i)=>{
ex.push({nome:e.innerText,peso:inputs[i*2].value||'0',reps:inputs[i*2+1].value||'0'});
});
return{
treino:treinoAtual,
data:new Date().toLocaleString('pt-BR'),
tempo:document.getElementById('tempo_'+treinoAtual).innerText,
exercicios:ex
};
}

function salvarRegistro(){
const h=JSON.parse(localStorage.getItem(historicoKey)||'[]');
h.push(gerarRegistro());
localStorage.setItem(historicoKey,JSON.stringify(h));
renderHistorico();
}

function renderHistorico(){
const div=document.getElementById('historico');div.innerHTML='';
JSON.parse(localStorage.getItem(historicoKey)||'[]').reverse().forEach(r=>{
div.innerHTML+=`
<div>
ğŸ’ª <strong>Treino ${r.treino}</strong><br>
ğŸ“… ${r.data}<br>
${r.tempo}
</div>`;
});
}

function textoExport(){
const r=gerarRegistro();
let t=`ğŸ’ª *RELATÃ“RIO DE TREINO*

â¡ï¸ *Treino ${r.treino}*
ğŸ“… Data: ${r.data}
â±ï¸ DuraÃ§Ã£o: ${r.tempo}

ğŸ”¥ ConcluÃ­do!

ğŸ† ExercÃ­cios:
`;
r.exercicios.forEach(e=>{
t+=`- ${e.nome} â€” ${e.peso}kg | ${e.reps} reps\n`;
});
return t;
}

function enviarWhats(){
if(salvarAoAbrir) salvarRegistro();
window.open(`https://wa.me/55${destinoWhats.value}?text=${encodeURIComponent(textoExport())}`);
}

function enviarEmail(){
if(salvarAoAbrir) salvarRegistro();
location.href=`mailto:${destinoEmail.value}?subject=RelatÃ³rio de Treino ${treinoAtual}&body=${encodeURIComponent(textoExport())}`;
}

function limparHistorico(){
if(confirm('Apagar todo o histÃ³rico?')){
localStorage.removeItem(historicoKey);
renderHistorico();
}
}

renderHistorico();
</script>

</body>
</html>
